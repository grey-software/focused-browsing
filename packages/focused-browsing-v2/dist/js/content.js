(()=>{var e,n,o,l,t,i="",c="self-focused ember-view",r="focus-card",s=window.location.toString(),d=!0,a=[];function h(e){console.log(e);var n=e.status,o=e.method,i=e.url;"focus"==n?i.includes("twitter")?("initial"==o?(console.log("setting interval to block twitter"),d?(console.log("1000 interval"),l=setInterval(w,500),d=!d):(console.log("100 interval"),l=setInterval(w,100))):"hidePanels"==o?(a=[],t=setInterval(y,1e3)):v(!0),u()):i.includes("linkedin")&&(console.log("about to focus on linkedin"),u(),f(!0)):"unfocus"==e.status&&(i.includes("twitter")?i.includes("/home")?(console.log("about to un-focus on Twitter"),v(!1)):I(!1):i.includes("linkedin")&&(console.log("about to un-focus on linkedin"),f(!1)))}function u(){e.src=chrome.runtime.getURL("www/card.html")}function g(){e.width="120px",e.height="100px",e.id=r,Object.assign(e.style,{position:"fixed",border:"none",zIndex:"10000"}),o.append(e)}function m(){try{document.getElementById(r).remove()}catch(e){console.log("the iframe is not on the screen")}}function f(e){console.log("here in this linkedIn function");try{e?(console.log("about to hide linkedIn feed"),document.getElementsByClassName(c)[0].style.visibility="hidden",g()):(console.log("about to make linkedIn feed visible"),document.getElementsByClassName(c)[0].style.visibility="visible",m())}catch(e){console.log(e)}}function v(e){console.log("here we are in toggle twitter distraction"),console.log("should hide is: "+e);try{i=function(){var e=k();if(console.log(e),null!=e)return e.className;throw"feed class name not found!"}(),e?(b(!0),I(!0),g()):(b(!1),I(!1),m())}catch(e){console.log(e)}}function w(){if(console.log("we are trying to block twitter home"),p("home"))return console.log("we can clear the interval"),console.log(l),clearInterval(l),void(d=!1);console.log("distractions are not hidden");try{C()&&k()&&(console.log("here in blocking twitter"),v(!0))}catch(e){console.log("Feed hasn't been loaded yet")}}function y(){if(console.log("we are trying to block twitter panel"),p("panel"))return console.log("we can clear the interval"),console.log(t),void clearInterval(t);try{C()&&(console.log("here in blocking twitter panel"),I(!0))}catch(e){console.log("Panel hasn't been loaded yet")}}function b(e){e?(o=document.getElementsByClassName(i)[1],TWITTER_FEED_CHILD=document.getElementsByClassName(i)[1].children[0],o.removeChild(o.childNodes[0])):o.append(TWITTER_FEED_CHILD)}function I(e){var n=E();if(e)for(var o=4;n.children.length>1;){var l=n.children[o].cloneNode(!0);a.push(l),n.removeChild(n.children[o]),o-=1}else for(var t=3;t>=0;)n.append(a[t]),t-=1}function p(e){try{var n=E();return"home"==e?"IFRAME"==k().children[0].nodeName&&1==n.children.length:1==n.children.length}catch(e){console.log(e)}}function k(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[0].children[0].children[3]}function E(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0]}function C(){return 5==E().children.length}n=chrome.runtime.connect({name:"Focused Browsing"}),console.log(s),n.postMessage({url:s}),n.onMessage.addListener(h),e=document.createElement("iframe")})();